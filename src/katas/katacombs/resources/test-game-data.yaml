rooms:
  - name: nowhere
    title: Nowhere
    description: You’re on the road to Nowhere

  - name: start
    title: Lost in Shoreditch
    description: >-
      You are standing at the end of a brick lane before a small brick building called 
      "The Old Truman Brewery". 
      Around you is a forest of restaurants and bars. A small stream of crafted beer flows out of 
      the building and down a gully.
    connections:
      - direction: north
        to: building
        description: >-
          I see a brick building with a sign saying “Truman Brewery“.
        words: [ building, inside ]
    items:
      - name: cheese
        words: [ cheddar ]
        description:
          inventory: A wedge of fine cheddar
          room: A wedge of cheese lies on the floor, its golden hue and rich aroma filling the air with savory promise.
          look: It's a piece of cheddar. It has a crumbly texture with glinting crystals, exuding a mature, sharp scent that teases your senses."
        triggers:
          - verb: eat
            actions:
              - command: speak
                argument: >-
                  As you lift the cheese to your lips, a thought skitters through your mind:
                  better save this savory delight for a moment of true need.
          - verb: drop
            conditions:
              - currentLocation: building
            actions:
              - command: drop
                argument: cheese
                responses:
                  success: >-
                    The rat sniffs the air, its nose twitching like mad. With lightning speed, 
                    it grabs the cheese and scurries into the hole, leaving you in the quiet triumph 
                    of rodent-free solitude.
                  failure: >-
                    As you reach into your inventory to drop the cheese, your hand comes up empty. 
                    It seems the cheese has taken its own path to freedom.
              - command: hide
                argument: rat
              - command: hide
                argument: cheese

  - name: building
    title: Inside the building
    description: You are inside the main room of the Truman Brewery.
    connections:
      - direction: south
        to: start
        words: [ outside, door ]
    items:
      - name: casks
        description:
          room: There is a strong smell of hops and a dozen empty casks.
        immovable: true
        triggers:
          - verb: look
            actions:
              - command: reveal
                argument: coin
                responses:
                  success: >-
                    You peer closely at the casks. Amidst the dust and cobwebs, 
                    a glint catches your eye — a single coin nestled against the wood. 
                    A hidden treasure or someone’s forgotten tip?
                  failure: >-
                    You take another look at the casks, hoping for a second coin. 
                    All you find is disappointment.

      - name: hole
        description:
          look: ''
        states:
          guarded:
            look: >-
              The rat blocks the hole like a self-appointed sentry, its whiskers twitching with defiance. 
              Whatever is inside the hole, it clearly doesn’t want you to find out.
          unguarded:
            look: ''
        initialState: guarded
        immovable: true
        triggers:
          - verb: look
            conditions:
              - hasState: [ hole, unguarded ]
            actions:
              - command: reveal
                argument: key
                responses:
                  success: >-
                    The rat's absence reveals a small, dark hole in the wall.
                    Amid the faint smell of old wood and dust, you spot a tiny key gleaming inside,
                    as if the rat had been guarding it all along.
                  failure: >-
                    The hole in the wall now lies empty, its secrets already uncovered. 
                    A faint draft whispers through it, as if the room itself is sighing in relief

      - name: rat
        immovable: true
        description:
          room: >-
            A plucky rat is stationed in front of a small hole in the wall, its tail curling like a question mark.
          look: >-
            The rat glares at you with beady eyes, its whiskers twitching in what you can only assume is suspicion. 
            It's guarding the hole like a tiny, furry bouncer.

      - name: key
        visible: false
        description:
          inventory: A small key
          room: There is a small key here.
          look: It’s a small rusted key.

      - name: note
        description:
          inventory: A small note
          room: A small note lies on the floor.
          look: >-
            The note is crumpled and stained, but you can still make out the words: 
            “Beware the rat. It’s a crafty one.”
        words: [ memo, paper, reminder ]
        triggers:
          - verb: read
            actions:
              - command: look
                argument: note

      - name: coin
        description:
          inventory: A coin
          room: There’s a coin here.
          look: >-
            It’s an old coin, worn and tarnished. You wonder if it’s worth anything 
            — or if it’s just another relic for your growing junk collection.
        visible: false

      - name: lantern
        words: [ light, lamp ]
        description:
          inventory: Brass lantern
          room: >-
            There’s a shiny brass lantern nearby. 
            It practically screams, ‘Take me! I’m functional and stylish!’
          look: >-
            It’s so polished you can see your reflection, which is both exciting and mildly unsettling.
        states:
          lit:
            room: It shines brightly, illuminating the surroundings.
            inventory: "- the flame dances steadily."
            look: The flame dances steadily.
          unlit:
            room: It is dark and cold.
            look: It looks like it could be lit.
        initialState: unlit
        triggers:
          - verb: light
            actions:
              - command: changeState
                argument: lamp
                parameter: lit
                responses:
                  success: >-
                    The lamp sputters for a moment, as if clearing its throat, 
                    then bursts into a steady flame. 
                    It seems proud of itself.
                  failure: >-
                    The lamp is already shining brightly! Trying to overachieve, aren't we?
          - verb: extinguish
            actions:
              - command: changeState
                argument: lamp
                parameter: unlit
                responses:
                  success: >-
                    As you extinguish the lamp, it lets out a final flicker, as if saying, 
                    "But I was just getting started!"
                  failure: >-
                    An epic battle ensues between you and... wait, no. The lamp is already off. 
                    Victory without lifting a finger.
          - verb: drop
            actions:
              - command: drop
                argument: lamp
                responses:
                  success: >-
                    You drop the lamp. It bounces once, lands upright, and seems smug about its durability.
                  failure: >-
                    You try to drop the lamp, but you’re not holding it. How do you drop something 
                    you never had? Deep thoughts.
          - verb: rub
            actions:
              - command: speak
                argument: >-
                  You rub the lamp. Nothing happens. Maybe it’s out of genies, 
                  or maybe you’re just not their type.
          - verb: kick
            actions:
              - command: speak
                argument: >-
                  You kick the lamp. It wobbles dangerously, then tips over and lands on your foot. 
                  Well played, lamp.
          - verb: talk
            actions:
              - command: speak
                argument: >-
                  You say a few kind words to the lamp. It doesn’t say anything back, 
                  but it seems to shine a little brighter. How sweet.
          - verb: eat
            actions:
              - command: speak
                argument: >-
                  You nibble at the lamp. It’s oily, crunchy, and incredibly bad for your teeth.
          - verb: push
            actions:
              - command: speak
                argument: >-
                  You push the object. It wobbles, then stays exactly where it was. 
                  Maybe you should push your luck instead.
          - verb: touch
            actions:
              - command: speak
                argument: >-
                  You touch the lamp. It’s oddly smooth and slightly sticky. 
                  You immediately regret your curiosity.
          - verb: kiss
            actions:
              - command: speak
                argument: >-
                  You kiss the lamp, and for a brief moment, you think you hear a genie laughing. 
                  Must be your imagination.

      - name: desk
        description:
          room: >- 
            Tucked into the corner of the room, an old desk leans slightly, its weathered
            surface cluttered with the echoes of forgotten tasks.
          look: >-
            You look at the desk. It’s covered in papers, pens, and existential dread.
        immovable: true
